# 4ì›” 26ì¼ (í™”) - rethrows,  ì¥¬ìŠ¤ ë©”ì´ì»¤ í”„ë¡œì íŠ¸ Step1 (2)

## ğŸ£Â í•™ìŠµë‚´ìš©

> ì˜¤ëŠ˜ì€ ì¥¬ìŠ¤ ë©”ì´ì»¤ í”„ë¡œì íŠ¸ Step1 ê¸°ëŠ¥ì„ ëª¨ë‘ êµ¬í˜„í•´ë³´ê³  PR ê³¼ì •ê¹Œì§€ ì§„í–‰í•˜ì˜€ë‹¤. ì¥¬ìŠ¤ ë©”ì´ì»¤ í”„ë¡œì íŠ¸ ì¤‘ FruitStoreëŠ” Classë¡œ, ê·¸ë¦¬ê³  JuiceMakerëŠ” Structë¡œ êµ¬í˜„ë˜ì–´ ìˆì—ˆë‹¤. ì–´ì œ ì²˜ìŒ ì´ë¥¼ ì ‘í–ˆì„ ë•ŒëŠ” ê¹Šì€ ê³ ë¯¼ìœ¼ë¡œ ì´ì–´ì§€ì§€ëŠ” ì•Šì•˜ì§€ë§Œ, ì˜¤ëŠ˜ì€ ì´ë¥¼ ì¢€ ë” ê³ ë¯¼í•´ë³´ì˜€ê³ , ë‹¤ìŒì˜ ì´ìœ  ë•Œë¬¸ì— ì´ë ‡ê²Œ íƒ€ì…ì„ ì„¤ì •í–ˆë‹¤ê³  ìƒê°í•œë‹¤. ì•„ë˜ì˜ ì˜ˆì‹œëŠ” [https://jeonyeohun.tistory.com/179](https://jeonyeohun.tistory.com/179)ë¥¼ ë³´ê³  ë§Œë“¤ì–´ ë³´ì•˜ë‹¤.
> 

- Class ë‚´ë¶€ Struct êµ¬ì¡°

```swift
struct StructType {
    var number = 1
}

class ClassType {
    var number = 2
    var someStruct = StructType()
}

let someClass = ClassType()
let someClassCopy = someClass

someClassCopy.number = 222
someClassCopy.someStruct.number = 111

print(someClassCopy.number) // 222
print(someClassCopy.someStruct.number) //111

print(someClass.number) // 222
print(someClass.someStruct.number) // 111
```

> ìœ„ì˜ ì½”ë“œ ê²°ê³¼ë¥¼ ë³´ë©´ Class ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ì‹œ, Class ë‚´ë¶€ StructëŠ” ë³µì‚¬ë˜ì§€ ì•Šê³  ê¸°ì¡´ì˜ Structê°€ ì‚¬ìš©ë˜ê³  ìˆë‹¤. ì´ëŠ” Classê°€ ì°¸ì¡° íƒ€ì…ì´ê¸° ë•Œë¬¸ì— ì°¸ì¡° ê°’ì„ ì „ë‹¬í•˜ëŠ” ê³¼ì •ì—ì„œ ë‚´ë¶€ì˜ ê°’ íƒ€ì…ì¸ StructëŠ” ë³µì‚¬ë˜ì§€ ì•Šê³  ê¸°ì¡´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë”°ë¼ê°€ê¸° ë•Œë¬¸ì´ë‹¤.
> 

- Struct ë‚´ë¶€ Class êµ¬ì¡°

```swift
struct StructType {
    var number = 1
    var someClass = ClassType()
}

class ClassType {
    var number = 2
}

var someStruct = StructType()
var someStructCopy = someStruct

someStructCopy.number = 222
someStructCopy.someClass.number = 111

print(someStructCopy.number) // 222
print(someStructCopy.someClass.number) //111

print(someStruct.number) // 1
print(someStruct.someClass.number) // 111
```

> ìœ„ì˜ ì½”ë“œ ê²°ê³¼ë¥¼ ë³´ë©´ Struct ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ì‹œ, Struct ë‚´ë¶€ Class ì¸ìŠ¤í„´ìŠ¤ëŠ”  ì°¸ì¡° íƒ€ì…ìœ¼ë¡œ ì°¸ì¡° ê°’ì´ ë³µì‚¬ë˜ì–´ ê°’ì— ë³€í™”ê°€ ìˆìœ¼ë©´ ì—…ë°ì´íŠ¸ê°€ ì´ë£¨ì–´ì§„ë‹¤. í•˜ì§€ë§Œ ì „ì²´ì ì¸ êµ¬ì¡°ëŠ” Structê°€ ì‚¬ìš©ë˜ê³  ìˆì–´ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ì‹œ ë³µì‚¬ë˜ì–´ ì‚¬ìš©ëœë‹¤. ë”°ë¼ì„œ someStructCopyëŠ” ì—…ë°ì´íŠ¸ ëœ ê°’ì„ ì‚¬ìš©í•˜ì§€ë§Œ, ê¸°ì¡´ì˜ someSturctëŠ” ê¸°ì¡´ì˜ ê°’ì„ ì‚¬ìš©í•œë‹¤.
> 

> ì´ë¥¼ í†µí•´, Struct ë‚´ Classë¥¼ ìƒì„±í•œ ì´ìœ ëŠ” Class ë‚´ë¶€ì—ì„œ ì¬ê³ ì˜ ë³€í™”ëŠ” ëª¨ë‘ì—ê²Œ ë˜‘ê°™ì´ ì ìš©ëœë‹¤. ì¦‰,  ì¥¬ìŠ¤ë©”ì´ì»¤ê°€ ëª‡ ëŒ€ê°€ ìˆë“  ì¬ê³ ì˜ ì–‘ì€ ëª¨ë‘ ê³µìœ í•˜ê³  ìˆë‹¤ëŠ” ê²ƒì´ë‹¤. ì¥¬ìŠ¤ë©”ì´ì»¤ëŠ” ì„œë¡œ ë…ë¦½ì ì´ë¼ê³  ë³´ë©´ ì´í•´í•˜ê¸° í¸í•˜ë‹¤. ì¥¬ìŠ¤ ë©”ì´ì»¤ê°€ ì—¬ëŸ¬ ëŒ€ì´ë©´ ì–´ëŠ ì¥¬ìŠ¤ë©”ì´ì»¤ëŠ” 3ê°œì˜ ì¥¬ìŠ¤ë¥¼ ë§Œë“¤ê³ , ë‹¤ë¥¸ ì¥¬ìŠ¤ë©”ì´ì»¤ëŠ” 5ëŒ€ì˜ ì¥¬ìŠ¤ë¥¼ ì¬ê³ ë§Œ ë–¨ì–´ì§€ì§€ ì•ŠëŠ”í•œ ì„œë¡œ ê´€ì—¬ì—†ì´ ë§Œë“ ë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.
> 

## ğŸ¥Â ë¬¸ì œì  / ê³ ë¯¼í•œ ì 

<aside>
ğŸ’¡ **ì‹¤í—˜ 1 : class ë‚´ë¶€ do-try-catch ë¬¸ìœ¼ë¡œ ì¸í•œ ê¸°ëŠ¥ í¬í™”**

</aside>

> ì¥¬ìŠ¤ ë©”ì´ì»¤ í”„ë¡œì íŠ¸ Step1 ë„ì¤‘ Struct ë‚´ë¶€ì—ì„œ makeJuice í•¨ìˆ˜ë¥¼ ìƒì„±í•˜ê³  ê·¸ ì•ˆì— ì…ë ¥ë°›ì€ juice ê°’ì„ Switch-caseë¬¸ì„ í†µí•´ ë¶„ë¥˜í•˜ì—¬ reduceStock()í•¨ìˆ˜ë¥¼ try í•´ë³´ê³ , ì˜¤ë¥˜ ë°œìƒì‹œ catch í•˜ì—¬ switch-caseë¬¸ì„ í†µí•´ ê° ì—ëŸ¬ì— ì•Œë§ëŠ” ë‚´ìš©ì„ ì¶œë ¥í•˜ëŠ” ê¸°ëŠ¥ì„ ë‹¤ë£¨ì—ˆë‹¤. ì´ë ‡ê²Œ ê¸€ë¡œ ì ì—ˆëŠ”ë° í•˜ë‚˜ì˜ í•¨ìˆ˜ ì•ˆì— ë„ˆë¬´ ë§ì€ ê¸°ëŠ¥ë“¤ì´ êµ¬í˜„ë˜ì–´ ìˆì–´ ì´ë¥¼ ë¶„ë¦¬í•  í•„ìš”ì„±ì„ í†µê°í•˜ì˜€ë‹¤.
> 

- ì½”ë“œ

```swift
struct JuiceMaker {
    private var JuiceMakersStore = FruitStore()
    
    func makeJuice(juice: String) {
        do {
            switch juice {
            case Juice.strawberryJuice.name:
                try JuiceMakersStore.reduceStock(fruit: Fruit.strawberry.name, amount: FruitConsumption.strawberryInStrawberryJuice)
            case Juice.bananaJuice.name:
                try JuiceMakersStore.reduceStock(fruit: Fruit.banana.name, amount: FruitConsumption.bananaInBananaJuice)
            case Juice.kiwiJuice.name:
                try JuiceMakersStore.reduceStock(fruit: Fruit.kiwi.name, amount: FruitConsumption.kiwiInKiwiJuice)
            case Juice.pineappleJuice.name:
                try JuiceMakersStore.reduceStock(fruit: Fruit.pineapple.name, amount: FruitConsumption.pineappleInPineappleJuice)
            case Juice.strawberryBananaJuice.name:
                try JuiceMakersStore.reduceStock(fruit: Fruit.strawberry.name, amount: FruitConsumption.strawberryInStrawberryBananaJuice)
                try JuiceMakersStore.reduceStock(fruit: Fruit.banana.name, amount: FruitConsumption.bananaInStrawberryBananaJuice)
            case Juice.mangoJuice.name:
                try JuiceMakersStore.reduceStock(fruit: Fruit.mango.name, amount: FruitConsumption.mangoInMangoJuice)
            case Juice.mangoKiwiJuice.name:
                try JuiceMakersStore.reduceStock(fruit: Fruit.mango.name, amount: FruitConsumption.mangoInMangoKiwiJuice)
                try JuiceMakersStore.reduceStock(fruit: Fruit.kiwi.name, amount: FruitConsumption.kiwiInMangoKiwiJuice)
            default:
                print("ë§Œë“¤ ìˆ˜ ì—†ëŠ” ì£¼ìŠ¤ì…ë‹ˆë‹¤")
            }
        } catch (let error) {
            switch error { //errorë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ì¤„ ìˆ˜ ìˆë‹¤ -> ê·¸ê±¸ í•¨ìˆ˜ë¡œ ë„˜ê²¨ì„œ ë‹¤ë¥¸ ìª½ì—ì„œ ì²˜ë¦¬
            case StockError.outOfStock:
                print(StockError.outOfStock.message)
            case StockError.invalidSelection:
                print(StockError.invalidSelection.message)
            default:
                print("ì•Œ ìˆ˜ ì—†ëŠ” ì—ëŸ¬") //í•¨ìˆ˜ë¡œ ì—ëŸ¬ ì²˜ë¦¬ ê°€ëŠ¥?
            }
        }
    }
}
```

## ğŸ“Â í•´ê²°ë°©ë²•

<aside>
ğŸ’¡ **ì‹¤í—˜ 1 : class ë‚´ë¶€ do-try-catch ë¬¸ìœ¼ë¡œ ì¸í•œ ê¸°ëŠ¥ í¬í™” - Rethrows ì‚¬ìš©**

</aside>

> ì´ë¯¸ throw ì²˜ë¦¬í•œ í•¨ìˆ˜ë¥¼ ë‹¤ì‹œ throw í•  ìˆ˜ ìˆë‹¤ë©´ í•¨ìˆ˜ë¥¼ ì™¸ë¶€ì— êµ¬í˜„í•˜ì—¬ ê¸°ì¡´ì˜ ì½”ë“œë¥¼ ë”ìš± ê°„ê²°í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆì„ ê²ƒì„ì„ í™•ì‹ í–ˆë‹¤. ì´ì— Rethrows í‚¤ì›Œë“œë¥¼ ê³µë¶€í•œ ê²°ê³¼, ê¸°ì¡´ì˜ makeJuice() í•¨ìˆ˜ë¥¼ 7ì¤„ë¡œ ì¤„ì—¬ ê°€ë…ì„±ì„ ë†’ì¼ ìˆ˜ ìˆì—ˆë‹¤. checkStock()í•¨ìˆ˜ë¥¼ ìƒˆë¡œ ìƒì„±í•˜ì—¬, reduceStockì„ ì‹¤í–‰í•˜ê¸° ìœ„í•˜ì—¬ â€˜(String, Int) throws -> Voidâ€™ íŒŒë¼ë¯¸í„° íƒ€ì…ìœ¼ë¡œ ë°›ê³ , rethrows í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì˜€ë‹¤. ì´ë¥¼ í†µí•´ ë‚´ë¶€ì— try í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ë„ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì§€ ì•Šê³  ë‚´ë¶€ì˜ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆì—ˆë‹¤.  ë‹¤ìŒìœ¼ë¡œ catch ë‚´ error ë˜í•œ ë§¤ê°œë³€ìˆ˜ë¡œ ì²˜ë¦¬í•˜ì—¬ ì™¸ë¶€ì— switch-caseë¬¸ì„ ë‚´í¬í•œ handle() í•¨ìˆ˜ë¥¼ ìƒì„±í•œ ë’¤ ì—ëŸ¬ ì²˜ë¦¬ êµ¬ì¡°ë¥¼ êµ¬í˜„í•˜ê³ , ì´ë¥¼ í˜¸ì¶œí•˜ëŠ” í˜•íƒœë¡œ ìˆ˜ì •í•˜ë‹ˆ, ì•„ë˜ì˜ ì½”ë“œë¡œ ì‘ì„±í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤.
> 

- ì½”ë“œ

```swift
struct JuiceMaker {
    var JuiceMakersStore = FruitStore()
    
    func makeJuice(of juice: String) {
        do {
            try checkStock(function: JuiceMakersStore.reduceStock(fruit:amount:), juice: juice)
        } catch (let error) {
            handle(error)
        }
    }
    
    private func checkStock(function: (String, Int) throws -> Void, juice: String) rethrows {
        switch juice {
        case Juice.strawberryJuice.name:
            try function(Fruit.strawberry.name, FruitConsumption.strawberryInStrawberryJuice)
        case Juice.bananaJuice.name:
            try function(Fruit.banana.name, FruitConsumption.bananaInBananaJuice)
        case Juice.kiwiJuice.name:
            try function(Fruit.kiwi.name, FruitConsumption.kiwiInKiwiJuice)
        case Juice.pineappleJuice.name:
            try function(Fruit.pineapple.name, FruitConsumption.pineappleInPineappleJuice)
        case Juice.strawberryBananaJuice.name:
            try function(Fruit.strawberry.name, FruitConsumption.strawberryInStrawberryBananaJuice)
            try function(Fruit.banana.name, FruitConsumption.bananaInStrawberryBananaJuice)
        case Juice.mangoJuice.name:
            try function(Fruit.mango.name, FruitConsumption.mangoInMangoJuice)
        case Juice.mangoKiwiJuice.name:
            try function(Fruit.mango.name, FruitConsumption.mangoInMangoKiwiJuice)
            try function(Fruit.kiwi.name, FruitConsumption.kiwiInMangoKiwiJuice)
        default:
            print("ë§Œë“¤ ìˆ˜ ì—†ëŠ” ì£¼ìŠ¤ì…ë‹ˆë‹¤")
        }
    }
    
    private func handle(_ error: Error) {
        switch error {
        case StockError.outOfStock:
            print(StockError.outOfStock.message)
        case StockError.missingProduct:
            print(StockError.missingProduct.message)
        default:
            print("ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ì…ë‹ˆë‹¤")
        }
    }
}
```

## ğŸŒÂ ì°¸ì¡°

1. Struct vs Class - ì „ì—¬í›ˆ tistory

[[Swift] Struct vs. Class (2), Structì•ˆì— ì°¸ì¡° íƒ€ì…, Class ì•ˆì— ê°’ íƒ€ì… ë³€ìˆ˜ê°€ ìˆì„ ë•Œ](https://jeonyeohun.tistory.com/179)

1. Rethrows - ì´ê´‘ì—° tistory

[[Swift] rethrowsë€](https://gwangyonglee.tistory.com/53)