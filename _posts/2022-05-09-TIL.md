# 5ì›” 9ì¼ (ì›”) - Unit Test, TDD, Notification, View Life Cycle, ì¥¬ìŠ¤ ë©”ì´ì»¤ í”„ë¡œì íŠ¸ Step3 (5)

## ğŸ£Â í•™ìŠµë‚´ìš©

> ì˜¤ëŠ˜ì€ í•™ìŠµí™œë™ ì‹œê°„ì„ í†µí•´ `Unit Test`ì™€ `TDD`ì— ëŒ€í•˜ì—¬ ì•Œì•„ë³´ëŠ” ì‹œê°„ì„ ê°€ì¡Œë‹¤.
> 

- **Unit Test**
    - ì»´í“¨í„° í”„ë¡œê·¸ë˜ë°ì—ì„œÂ ì†ŒìŠ¤ ì½”ë“œì˜ íŠ¹ì • ëª¨ë“ˆì´ ì˜ë„ëœ ëŒ€ë¡œ ì •í™•íˆ ì‘ë™í•˜ëŠ”ì§€ ëª¨ë“  í•¨ìˆ˜ì™€ ë©”ì†Œë“œì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤(`Test case`)ë¥¼ í†µí•´ ê²€ì¦í•˜ëŠ” ì ˆì°¨ (ì¶œì²˜: [ìœ„í‚¤ë°±ê³¼](https://ko.wikipedia.org/wiki/%EC%9C%A0%EB%8B%9B_%ED%85%8C%EC%8A%A4%ED%8A%B8))
    - FIRST ì›ì¹™ ê¶Œì¥
        - `Fast`
            - ì‹ ì†ì„±
            - ì„¸ë¶€ì ì¸ ë¶€ë¶„ê¹Œì§€ ìì„¸íˆ í•˜ë‹¤ ë³´ë©´ `test code` ë¶„ëŸ‰ ë° ì‹¤í–‰ ì‹œê°„ ì§€ì—°
        - `Independent` / `Isolated`
            - ë…ë¦½ì„±
            - ê°ê°ì˜ `test`ê°€ ì„œë¡œì—ê²Œ ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ” í™˜ê²½
        - `Repeatable`
            - ë°˜ë³µ ê°€ëŠ¥ì„±
            - ì–¸ì œ, ì–´ë””ì„œë‚˜ ì‹¤í–‰í•´ë„ ê°™ì€ ê²°ê³¼ ë„ì¶œ
            - ì˜ˆ) ì¸í„°ë„· ì—°ê²°ì´ ì—†ì–´ë„ ê°™ì€ ê²°ê³¼ ë„ì¶œ
        - `Self-Validating`
            - ìê¸° ê²€ì¦
            - `test` ì½”ë“œ ë‚´ë¶€ì—ì„œ ì˜ ì‘ë™í•˜ëŠ”ì§€ íŒë‹¨ ê°€ëŠ¥í•˜ë„ë¡ ë§ˆë ¨
            - ë‹¤ë¥¸ ì½”ë“œì— ì˜í–¥ì„ ë°›ì•„ì„œ ì‹¤í–‰ë˜ì–´ì„œëŠ” ì•ˆë¨
        - `Timely`
            - ì ì‹œì„±
    - ê¸°ë³¸ í¬ë§·
        - ì½”ë“œ
            
            ```swift
            import XCTest
            
            class UnitTestSampleTests: XCTestCase {
            
                override func setUpWithError() throws {
                }
            
                override func tearDownWithError() throws {
                }
            
                func testExample() throws {
                }
            
                func testPerformanceExample() throws {
                    measure {
                    }
                }
            }
            ```
            
            - import XCTest
                - `XCTest` í”„ë ˆì„ì›Œí¬ `import`
            - [ì„ íƒ] @testable import targetì´ë¦„
                - í…ŒìŠ¤íŠ¸ë¥¼ í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ì•± targetì´ë¦„
                - Targetë“¤ì€ Swiftì—ì„œ ë³„ë„ì˜ moduleë¡œ ì²˜ë¦¬ â†’ ì ‘ê·¼ì„ ìœ„í•œ ì‘ì—… í•„ìš”
            - class ë„¤ì„: XCTestCase
                - `XCTest`ì˜ í•˜ìœ„ í´ë˜ìŠ¤
                - í…ŒìŠ¤íŠ¸ì—ì„œ ê°€ì¥ ê¸°ë³¸ì´ ë˜ëŠ” ì¶”ìƒ í´ë˜ìŠ¤
            - `setUpWithError()`
                - `test case`ê°€ ì‹¤í–‰ë˜ê¸° ì „ë§ˆë‹¤ í˜¸ì¶œ
                - ê°ê°ì˜ ë©”ì„œë“œê°€ ë™ì¼ ì¡°ê±´ì— í˜¸ì¶œë  ìˆ˜ ìˆë„ë¡ ì´ˆê¸°í™”
            - `tearDownWithError()`
                - `test case`ê°€ ì‹¤í–‰ëœ í›„ë§ˆë‹¤ í˜¸ì¶œ
                - `setUpWithError()`ì—ì„œ ì„¤ì •ëœ ê°’ ì´ˆê¸°í™”
            - `testExample()`
                - `test case`ê°€ ë˜ëŠ” ë©”ì„œë“œ
                - ë¬´ì¡°ê±´ ë„¤ì´ë°ì´ `test`ë¡œ ì‹œì‘
            - `testPerformanceExample()`
                - `est code`ì˜ ì„±ëŠ¥ ì²´í¬

- **TDD (Test-driven development)**
    - ì •ì˜ â†’ ë§¤ìš° ì§§ì€ ê°œë°œ ì‚¬ì´í´ì„ ë°˜ë³µí•˜ëŠ” S/W ê°œë°œ í”„ë¡œì„¸ìŠ¤ (ì¶œì²˜: [ìœ„í‚¤ë°±ê³¼](https://ko.wikipedia.org/wiki/%ED%85%8C%EC%8A%A4%ED%8A%B8_%EC%A3%BC%EB%8F%84_%EA%B0%9C%EB%B0%9C))
    - ê³¼ì •
        - [1st] `Test` íŒŒì¼ ë‚´ â†’ ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±
        - [2nd] `Main` íŒŒì¼ ë‚´ â†’ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ê¸° ìœ„í•œ ìµœì†Œí•œì˜ ì½”ë“œ ì‘ì„±
        - [3rd] `Test` íŒŒì¼ ë‚´ â†’ `gutter` ë¥¼ í†µí•œ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‹¤í–‰ ì„±ê³µ ì—¬ë¶€ í™•ì¸
        - [4th] `Main` íŒŒì¼ ë‚´ â†’ ì½”ë“œ ë¦¬íŒ©í† ë§
    - ì˜ˆì‹œ
        - ì£¼ì œ: 100 ì´ìƒì˜ ìˆ˜ë¥¼ ìŒìˆ˜ë¡œ ë°˜í™˜í•˜ê³ , ë‚˜ë¨¸ì§€ ìˆ˜ëŠ” ê·¸ëŒ€ë¡œ ë°˜í™˜í•˜ëŠ” ì½”ë“œ ì‘ì„±
        - ì½”ë“œ([1st] `Test` íŒŒì¼ ë‚´ â†’ ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±)
            
            ```swift
            import XCTest
            
            class StrangeCalculatorTests: XCTestCase {
                var sut: StrangeCalculator!
            
                override func setUpWithError() throws {
                    try super.setUpWithError()
                    sut = StrangeCalculator()
                }
            
                override func tearDownWithError() throws {
                    try super.tearDownWithError()
                    sut = nil
                }
            
                func test_returnMinusNumberIfNumberIsGreaterThan100_100ì´_ë„˜ì§€ì•ŠëŠ”ìˆ˜ë¥¼_ì…ë ¥ë°›ì„ë•Œ_ê·¸ëŒ€ë¡œë°˜í™˜í•˜ëŠ”ì§€() throws {
            				//given
                    let input = 99
                    let expectation = 99
                    
            				//when
                    let result = sut.returnMinusNumberIfNumberIsGreaterThan100(number: input)
                    
            				//then
                    XCTAssertEqual(result, expectation)
                }
            }
            ```
            
        - ì½”ë“œ([2nd] `Main` íŒŒì¼ ë‚´ â†’ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ê¸° ìœ„í•œ ìµœì†Œí•œì˜ ì½”ë“œ ì‘ì„±)
            
            ```swift
            struct StrangeCalculator {
                func returnMinusNumberIfNumberIsGreaterThan100(number: Int) -> Int {    
                    return number
                }
            }
            ```
            
        - ì½”ë“œ ì™¼ìª½ì˜ ë§ˆë¦„ëª¨ ë²„íŠ¼ í´ë¦­ ([3rd] `Test` íŒŒì¼ ë‚´ â†’ `gutter` ë¥¼ í†µí•œ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‹¤í–‰ ì„±ê³µ ì—¬ë¶€ í™•ì¸)
        - ì½”ë“œ ë¦¬íŒ©í† ë§([4th] `Main` íŒŒì¼ ë‚´ â†’ ì½”ë“œ ë¦¬íŒ©í† ë§)
            
            ```swift
            struct StrangeCalculator {
                func returnMinusNumberIfNumberIsGreaterThan100(number: Int) -> Int {
                    let result = number >= 100 ? -(number) : number
                    
                    return result
                }
            }
            ```
            
            - í•´ë‹¹ ì½”ë“œëŠ” ì•„ë˜ì˜ `test case`ë¥¼ ë°˜ì˜í•œ ì½”ë“œ ë¦¬íŒ©í† ë§ ê²°ê³¼ë¬¼
            - ì›ë˜ì˜ ì½”ë“œëŠ” ë¦¬íŒ©í† ë§ ì—¬ì§€ê°€ ì—†ì–´ ì•„ë˜ì˜ `case`ë¥¼ í¬í•¨í•˜ì—¬ ê·¹ì ì¸ ë¦¬íŒ©í† ë§ ê²°ê³¼ë¬¼ì„ ì—°ì¶œí•˜ê¸° ìœ„í•˜ì—¬ ë¯¸ë¦¬ ìœ„ì™€ ê°™ì´ ì‘ì„±
        - ì´í›„ ë‹¤ì–‘í•œ test case ì‘ì„±
            - test_returnMinusNumberIfNumberIsGreaterThan100_ìŒìˆ˜ë¥¼_ì…ë ¥ë°›ì„ë•Œ_ê·¸ëŒ€ë¡œë°˜í™˜í•˜ëŠ”ì§€()
            - test_returnMinusNumberIfNumberIsGreaterThan100_100ì„_ì…ë ¥ë°›ì„ë•Œ_ìŒìˆ˜ë¡œ_ë°˜í™˜í•˜ëŠ”ì§€()
            - test_returnMinusNumberIfNumberIsGreaterThan100_Int64ìë£Œí˜•ì˜ìµœëŒ“ê°’ì„_ì…ë ¥ë°›ì„ë•Œ_ìŒìˆ˜ë¡œ_ë°˜í™˜í•˜ëŠ”ì§€()
            - test_returnMinusNumberIfNumberIsGreaterThan100_0ì„_ì…ë ¥ë°›ì„ë•Œ_ê·¸ëŒ€ë¡œ_ë°˜í™˜í•˜ëŠ”ì§€()
            - ...
    

## ğŸ¥Â ë¬¸ì œì  / ê³ ë¯¼í•œ ì 

<aside>
ğŸ’¡ **ì‹¤í—˜ 1 : ViewController1 (post) â†’ ViewController2 (observer) ì‹œ ë©”ëª¨ë¦¬ ë¯¸í• ë‹¹ ë¬¸ì œ**

</aside>

- í™”ë©´ ì´ë™ ë°©ì‹: `ViewController 1` -> `ViewController 2` -> `ViewController 1`
- ë°ì´í„° ì „ë‹¬ êµ¬ì¡° : `ViewController2` -> `ViewController1`

> `VC2` ì—ì„œ `Notification`ì„ `post`, `VC1` ì—ì„œ `addObserver`ë¥¼ êµ¬í˜„í•˜ë ¤ê³  í•œë‹¤ë©´, `VC1`ì—ì„œ `NotificationCenter`ì— `Observer`ë¡œ ë“±ë¡ì„ í•´ë†“ì•˜ê¸° ë•Œë¬¸ì— `VC2`ì—ì„œ `NotificationCenter`ë¡œ ì•Œë¦¼ì„ `Post`í•˜ë©´, ë¯¸ë¦¬ `VC1`ì—ì„œ ë“±ë¡í•œ ì˜µì €ë²„ì—ì„œ í•´ë‹¹ ì•Œë¦¼ì„ ìˆ˜ì‹ í•˜ì—¬, `selector`ì— ë“±ë¡í•œ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ....
> 

- í™”ë©´ ì´ë™ ë°©ì‹: `ViewController 1` -> `ViewController 2` -> `ViewController 1`
- ë°ì´í„° ì „ë‹¬ êµ¬ì¡° : `ViewController1` -> `ViewController2`

> `VC1` ì—ì„œ `Notification`ì„ `post`, `VC2` ì—ì„œ `addObserver`ë¥¼ êµ¬í˜„í•˜ë ¤ê³  í•œë‹¤ë©´, `VC1`ì—ì„œ `NotificationCenter`ë¡œ ì•Œë¦¼ì„ `Post`í•˜ì˜€ìœ¼ë‚˜, ë©”ëª¨ë¦¬ì— ì˜µì €ë²„ê°€ ë“±ë¡ë˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— í•´ë‹¹ ì•Œë¦¼ì„ ìˆ˜ì‹ ì„ ë°›ì§€ ëª»í•œë‹¤. `VC2`ì—ì„œ ë’¤ëŠ¦ê²Œ `NotificationCenter`ì— `Observer`ë¡œ ë“±ë¡ì„ í•´ë³´ì•˜ì§€ë§Œ, ì´ë¯¸ `VC1`ì—ì„œ ë³´ë‚¸ `post`ëŠ” ë§Œë£Œê°€ ë˜ì–´ `VC2`ì˜ `Observer`ëŠ” ì•„ë¬´ëŸ° `Notification`ì„ ìˆ˜ì‹ í•˜ì§€ ëª»í•˜ëŠ” ìƒíƒœì´ë‹¤.
> 

> ì¦‰, ë¬¸ì œë¥¼ ì •ë¦¬í•˜ìë©´, `Observer`ê°€ ë©”ëª¨ë¦¬ì— ì˜¬ë¼ê°€ê¸° ì´ì „ì— `VC1`ì—ì„œ `post`ë¥¼ í•˜ì˜€ê¸°ì— `observer`ê°€ ì•Œë¦¼ì„ ì¸ì‹í•˜ì§€ ëª»í•˜ëŠ” ìƒíƒœì— ì§ë©´í•œ ê²ƒì´ë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” `VC1`ì—ì„œ ì•Œë¦¼ì„ `post`í•˜ê¸° ì´ì „ì— `observer`ë¥¼ ë©”ëª¨ë¦¬ì— ë¨¼ì € ì˜¬ë¦°ë‹¤ë©´ `VC2`ì—ì„œë„ ì•Œë¦¼ì„ ìˆ˜ì‹ í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤. í•˜ì§€ë§Œ, ì–´ë–»ê²Œ `VC1`ì—ì„œ ì•Œë¦¼ì„ `post`í•˜ê¸° ì „ì— `VC2`ì˜ `Observer`ë¥¼ ë©”ëª¨ë¦¬ì— ë¨¼ì € ì˜¬ë¦´ ìˆ˜ ìˆëŠ”ì§€ ë°©ë²•ì„ ì•„ë¬´ë¦¬ ê¶êµ¬í•´ë³´ì•„ë„ ë– ì˜¤ë¥´ì§€ ì•Šì•˜ë‹¤.
> 

## ğŸ“Â í•´ê²°ë°©ë²•

<aside>
ğŸ’¡ **ì‹¤í—˜ 1 : ViewController1 (post) â†’ ViewController2 (observer) ì‹œ ë©”ëª¨ë¦¬ ë¯¸í• ë‹¹ ë¬¸ì œ - View Life Cycle íŒŒì•…ì„ í†µí•œ State Method ì‚¬ìš©**

</aside>

> ìˆ˜ì¼ë™ì•ˆ ì—¬ëŸ¬ ì°¨ë¡€ ê³ ë¯¼í•˜ì—¬ ë°©ë²•ì„ ê¶êµ¬í•˜ë˜ ì¤‘ í•™ìŠµí™œë™ ì‹œê°„ì„ í†µí•´ `View Life Cycle`ì˜ `State Method`ê°€ ê°ê° ì–¸ì œ í˜¸ì¶œë˜ëŠ”ì§€ íƒêµ¬í•˜ë˜ ì¤‘ ë‹¤ìŒì˜ ìƒê°ì´ ë– ì˜¬ëë‹¤.
> 

> `VC1`ì—ì„œ `VC2`ë¡œ ê¸°ë³¸ ëª¨ë‹¬ë°©ì‹ìœ¼ë¡œ í™”ë©´ì „í™˜ì„ í•  ë•Œ ê°ê°ì˜ `State Method`ëŠ” ë‹¤ìŒê³¼ ê°™ì´ í˜¸ì¶œëœë‹¤.
> 

- ëª¨ë‹¬ ë°©ì‹ - `automatic`
    - ======================
    - 1st viewDidLoad
    - 1st viewWillAppear
    - 1st viewDidAppear
    - ======================
    - 2nd viewDidLoad
    - 2nd viewWillAppear
    - 2nd viewDidAppear

> `VC1`ì—ì„œ `VC2`ë¡œ í’€ìŠ¤í¬ë¦° ëª¨ë‹¬ë°©ì‹ìœ¼ë¡œ í™”ë©´ì „í™˜ ì‹œ, ê°ê°ì˜ `State Method`ëŠ” ë‹¤ìŒê³¼ ê°™ì´ í˜¸ì¶œëœë‹¤.
> 

- ëª¨ë‹¬ ë°©ì‹ - `fullScreen`
    - ======================
    - 1st viewDidLoad
    - 1st viewWillAppear
    - 1st viewDidAppear
    - ======================
    - 2nd viewDidLoad
    - 1st viewWillDisAppear
    - 2nd viewWillAppear
    - 2nd viewDidAppear
    - 1st viewDidDisappear
    

> ê·¸ë ‡ë‹¤ë©´, `VC1`ì´ `viewWillDisappear`ë‚˜ `viewDidDisappear`ì—ì„œ `Notification`ì„ `Post`í•˜ë©´ì´ë¯¸ `VC2`ì—ì„œ `'2nd viewDidLoad'`ë¡œ ì˜µì €ë²„ë¥¼ ë“±ë¡í•˜ë©´ ì•Œë¦¼ì„ ìˆ˜ì‹ ë°›ì„ ìˆ˜ ìˆì§€ ì•Šì„ê¹Œ í•˜ëŠ” ê°€ì„¤ì„ ìƒê°í•˜ê²Œ ë˜ì—ˆë‹¤. ê·¸ë¦¬ê³  ì´ë¥¼ êµ¬í˜„í•´ë³¸ ê²°ê³¼ `VC2`ì˜ `observer`ì— ë“±ë¡ëœ `selector` í•¨ìˆ˜ê°€ ì˜¬ë°”ë¥´ê²Œ ì‹¤í–‰ ë¨ì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤!!
> 

- `VC1` ì½”ë“œ(`Modal` ë°©ì‹ `fullScreen`ìœ¼ë¡œ ë³€ê²½)

```swift
private func goToFruitStockViewController() {
        guard let controller = self.storyboard?.instantiateViewController(withIdentifier: "ModalViewController") else { return }

        controller.modalPresentationStyle = .fullScreen

        present(controller, animated: true)
    }
```

- `VC1` ì½”ë“œ(`viewDidDisappear`ì‹œ `Notification`ì„ `post`)

```swift
override func viewDidDisappear(_ animated: Bool) {
        super.viewDidDisappear(animated)

        NotificationCenter.default.post(name: .test, object: nil)
}
```

- `VC2` ì½”ë“œ(`viewDidLoad`ì‹œ `NotificationCenter`ì— `Observer` ìƒì„±)

```swift
override func viewDidLoad() {
        super.viewDidLoad()
        
        NotificationCenter.default.addObserver(self, selector: #selector(test), name: .test, object: nil)
}
```

> ì´ë ‡ê²Œ ì½”ë“œë¥¼ ì‘ì„±í•˜ë©´, ì•„ë˜ì—ì„œ ë³´ì‹œë‹¤ì‹œí”¼ ì˜µì €ë²„ê°€ ë“±ë¡ëœ ì´í›„ `Notification`ì´ `post` ë˜ê¸° ë•Œë¬¸ì— `Notification`ì„ ìˆ˜ì‹ í•  ìˆ˜ ìˆê²Œ ëœë‹¤.
> 

- ëª¨ë‹¬ ë°©ì‹ - `fullScreen`
    - ======================
    - 1st viewDidLoad
    - 1st viewWillAppear
    - 1st viewDidAppear
    - ======================
    - 2nd viewDidLoad - VC2 addObserver
    - 1st viewWillDisAppear -
    - 2nd viewWillAppear
    - 2nd viewDidAppear
    - 1st viewDidDisappear - VC1 Notification Post

## ğŸŒÂ ì°¸ì¡°

1. Unit Test - ìœ„í‚¤ë°±ê³¼

[ìœ ë‹› í…ŒìŠ¤íŠ¸ - ìœ„í‚¤ë°±ê³¼, ìš°ë¦¬ ëª¨ë‘ì˜ ë°±ê³¼ì‚¬ì „](https://ko.wikipedia.org/wiki/%EC%9C%A0%EB%8B%9B_%ED%85%8C%EC%8A%A4%ED%8A%B8)

1. TDD - ìœ„í‚¤ë°±ê³¼

[í…ŒìŠ¤íŠ¸ ì£¼ë„ ê°œë°œ - ìœ„í‚¤ë°±ê³¼, ìš°ë¦¬ ëª¨ë‘ì˜ ë°±ê³¼ì‚¬ì „](https://ko.wikipedia.org/wiki/%ED%85%8C%EC%8A%A4%ED%8A%B8_%EC%A3%BC%EB%8F%84_%EA%B0%9C%EB%B0%9C)

1. Unit Test - ì•¼ê³°ë‹·ë„·

[Unit Test ì‘ì„±í•˜ê¸° - ì•¼ê³°ë‹·ë„·](https://yagom.net/courses/unit-test-%ec%9e%91%ec%84%b1%ed%95%98%ea%b8%b0/)

1. @testable import - zeddios tistory

[@testable importì— ëŒ€í•œ ê³ ì°°](https://zeddios.tistory.com/1078)